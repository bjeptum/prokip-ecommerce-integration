<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Loading Feature</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        .sync-option-btn { 
            display: flex; align-items: center; padding: 15px; margin: 10px 0; 
            border: 2px solid #ddd; border-radius: 8px; background: white; 
            cursor: pointer; transition: all 0.3s;
        }
        .sync-option-btn:hover { border-color: #007bff; }
        .sync-option-btn:disabled { opacity: 0.7; cursor: not-allowed; }
        .sync-option-text { margin-left: 15px; }
        .fa-spinner { animation: spin 1s linear infinite; }
        @keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
        .test-result { margin: 20px 0; padding: 15px; border-radius: 8px; }
        .success { background: #d4edda; color: #155724; border: 1px solid #c3e6cb; }
        .error { background: #f8d7da; color: #721c24; border: 1px solid #f5c6cb; }
    </style>
</head>
<body>
    <h1>üß™ Test Loading Feature</h1>
    
    <div id="test-results"></div>
    
    <h2>Test Buttons</h2>
    
    <button class="sync-option-btn" id="syncInventoryBtn" onclick="testSyncInventory()">
        <i class="fas fa-download" style="color: var(--success-color);" id="syncInventoryIcon"></i>
        <div class="sync-option-text">
            <strong id="syncInventoryText">Sync Inventory from Prokip</strong>
            <span id="syncInventoryDesc">Push Prokip inventory quantities to WooCommerce</span>
        </div>
    </button>
    
    <button class="sync-option-btn" id="viewInventoryBtn" onclick="testViewInventory()">
        <i class="fas fa-boxes" style="color: var(--info-color);" id="viewInventoryIcon"></i>
        <div class="sync-option-text">
            <strong id="viewInventoryText">View Store Inventory</strong>
            <span id="viewInventoryDesc">See current inventory levels from WooCommerce</span>
        </div>
    </button>

    <script>
        function showResult(message, isSuccess = true) {
            const resultsDiv = document.getElementById('test-results');
            resultsDiv.innerHTML += `<div class="test-result ${isSuccess ? 'success' : 'error'}">${message}</div>`;
        }

        async function testSyncInventory() {
            showResult('üîÑ Testing sync inventory loading...');
            
            // Get button elements BEFORE closing modal (simulated)
            const btn = document.getElementById('syncInventoryBtn');
            const icon = document.getElementById('syncInventoryIcon');
            const text = document.getElementById('syncInventoryText');
            const desc = document.getElementById('syncInventoryDesc');
            
            // Show loading state only if elements exist
            if (btn && icon && text && desc) {
                showResult('‚úÖ Elements found - applying loading state');
                
                // Disable button and show loading
                btn.disabled = true;
                btn.style.opacity = '0.7';
                btn.style.cursor = 'not-allowed';
                icon.className = 'fas fa-spinner fa-spin';
                icon.style.color = 'var(--info-color)';
                text.textContent = 'Syncing Inventory...';
                desc.textContent = 'Please wait while we sync your inventory from Prokip';
                
                showResult('‚úÖ Loading state applied successfully');
                
                // Simulate async operation
                setTimeout(() => {
                    // Restore button state only if elements exist
                    if (btn && icon && text && desc) {
                        btn.disabled = false;
                        btn.style.opacity = '1';
                        btn.style.cursor = 'pointer';
                        icon.className = 'fas fa-download';
                        icon.style.color = 'var(--success-color)';
                        text.textContent = 'Sync Inventory from Prokip';
                        desc.textContent = 'Push Prokip inventory quantities to WooCommerce';
                        
                        showResult('‚úÖ Button state restored successfully - TEST PASSED!');
                    }
                }, 2000);
            } else {
                showResult('‚ùå Elements not found - TEST FAILED!', false);
            }
        }

        async function testViewInventory() {
            showResult('üîÑ Testing view inventory loading...');
            
            // Get button elements BEFORE closing modal (simulated)
            const btn = document.getElementById('viewInventoryBtn');
            const icon = document.getElementById('viewInventoryIcon');
            const text = document.getElementById('viewInventoryText');
            const desc = document.getElementById('viewInventoryDesc');
            
            // Show loading state only if elements exist
            if (btn && icon && text && desc) {
                showResult('‚úÖ Elements found - applying loading state');
                
                // Disable button and show loading
                btn.disabled = true;
                btn.style.opacity = '0.7';
                btn.style.cursor = 'not-allowed';
                icon.className = 'fas fa-spinner fa-spin';
                icon.style.color = 'var(--info-color)';
                text.textContent = 'Loading Inventory...';
                desc.textContent = 'Please wait while we load your inventory';
                
                showResult('‚úÖ Loading state applied successfully');
                
                // Simulate async operation
                setTimeout(() => {
                    // Restore button state only if elements exist
                    if (btn && icon && text && desc) {
                        btn.disabled = false;
                        btn.style.opacity = '1';
                        btn.style.cursor = 'pointer';
                        icon.className = 'fas fa-boxes';
                        icon.style.color = 'var(--info-color)';
                        text.textContent = 'View Store Inventory';
                        desc.textContent = 'See current inventory levels from WooCommerce';
                        
                        showResult('‚úÖ Button state restored successfully - TEST PASSED!');
                    }
                }, 2000);
            } else {
                showResult('‚ùå Elements not found - TEST FAILED!', false);
            }
        }
    </script>
</body>
</html>
